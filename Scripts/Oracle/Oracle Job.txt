Endoresment Posting :

 
select en.authorizationpaymentcode,en.nextcareclaimhdrcode,en.tpaclaimhdrcode,en.ENDORESMENTCODE,en.ENDORESMENTPREFIX,en.ENDORESMENTNO,en.ENDORESMENTSUFFIX,en.ENDORESMENTFULLNO,en.REFDATE,en.PROVIDERTYPECODE,en.PROVIDERCODE,en.CREATEDIN,en.CREATEDON,en.CREATEDBY,en.LASTMODIFIEDON,en.LASTMODIFIEDBY,en.COMPANYCODE,en.LOCATIONCODE,en.DEACTIVATEDON,en.DEACTIVATEDBY,en.SERIALNO,en.AUTHORIZEDSTATUS,en.SOURCECODE,en.MEMBERCODE,en.GROUPCODE,en.BROKERCODE,en.POLICYTYPE,en.POLICYCODE,en.INDIVIDUALPOLICYCODE,en.PAYMENTCODE,en.FETCHTILLDATE,en.ADMINISTEREDBY,en.TPATYPE,en.ISBILLINGTOPROVIDER,en.ACCOUNTDESIGNATION,en.DOCUMENTNO,en.DOCUMENTAMOUNT,en.ISHNMPOSTINGDONE,PRO.PROVIDERNAME,GEN.CONSTANTNAME ProviderTypeName,GEN1.CONSTANTNAME AuthorizedStatusName,PRO.PROVIDERALTERNATIVENAME,0 Totall,0 DenailValueTotal,
0 ApprovedAmountTotal,0 RequestAmountTotal,0 DetectableAmountTotal,0 CoInsurerAmountTotal ,gen2.constantname SourceName,BRO.BROKER_NAME_EN BrokerName,(MEM.FIRST_NAME || MEM.LAST_NAME)  MemberName,GRO.GROUP_NAME GroupName,GRO1.GROUP_NAME AccountDesignationName
,PO.POLICYID,POL.POLICYNAME,IPOL.POLICYID IPPolicyID,IPOL.POLICYNAME IndividualPolicyName,gen5.CONSTANTNAME as PaymentName,
gen8.CONSTANTNAME as AdministeredByName,gen9.CONSTANTNAME as TPATypeName ,
(SELECT LISTAGG (IMNGI.REF_NO, '/') WITHIN GROUP (ORDER BY IMNGI.CLAIMREFCODE) FROM im_ngi_jvposting IMNGI
where CLAIMREFCODE = EN.ENDORESMENTCODE) As DocumnetNo ,
(SELECT LISTAGG (DenialAmount,'/')  WITHIN GROUP (ORDER BY IMNGI.ENDORESMENTCODE) FROM IM_ENDORESMENTPOSTINGSUBDTL IMNGI
where IMNGI.ENDORESMENTCODE = EN.ENDORESMENTCODE) as  DocumnetAmount,en.MemoType from IM_ENDORSEMENTPOSTING en
left join im_providers pro on PRO.PROVIDERCODE=en.PROVIDERCODE
left join genconstant gen on GEN.CONSTANTVALUE=en.PROVIDERTYPECODE and GEN.CATEGORY='PROVIDERTYPE' and UPPER(GEN.LANGUAGECODE)='EN-US'
left join genconstant gen1 on gen1.CONSTANTVALUE=en.AUTHORIZEDSTATUS and GEN1.CATEGORY='AUTHORIZEDSTATUS' and UPPER(GEN1.LANGUAGECODE)='EN-US'
left join genconstant gen2 on gen2.CONSTANTVALUE=EN.SOURCECODE and GEN2.CATEGORY='SOURCETYPE' and UPPER(GEN2.LANGUAGECODE)='EN-US'
left join genconstant gen8 on gen8.CONSTANTVALUE=EN.ADMINISTEREDBY and gen8.CATEGORY='NGIQUOTATIONTYPE' and UPPER(gen8.LANGUAGECODE)='EN-US'
left join genconstant gen9 on gen9.CONSTANTVALUE=EN.TPAType and gen9.CATEGORY='TPATYPE' and UPPER(gen9.LANGUAGECODE)='EN-US'
left join im_brokers bro on BRO.BROKERCODE=EN.BROKERCODE
left join im_members mem on MEM.MEMBER_CODE=EN.MEMBERCODE
left join im_groups gro on GRO.GROUP_CODE=EN.GROUPCODE
left join im_groups gro1 on GRO1.GROUP_CODE=EN.AccountDesignation
left join genconstant gen5 on GEN5.CONSTANTVALUE=EN.PAYMENTCODE and GEN5.CATEGORY='PRROVIDERPAYMENT' and UPPER(GEN5.LANGUAGECODE)='EN-US'
left join (select PO.POLICYCODE POLICYCODE, po.POLICYID,po.POLICYNAME,1 TypeCode from Im_Policy po union all
select IPO.INDIVIDUALPOLICYCODE POLICYCODE,IPO.POLICYID, IPO.POLICYNAME,2 TypeCode from im_individualpolicy ipo)pol
on pol.POLICYCODE=decode(EN.POLICYTYPE,1,EN.POLICYCODE,2,EN.INDIVIDUALPOLICYCODE)and pol.Typecode=EN.POLICYTYPE
left join im_individualpolicy ipol on IPOL.INDIVIDUALPOLICYCODE= EN.INDIVIDUALPOLICYCODE
left join im_policy PO on PO.POLICYCODE= EN.POLICYCODE
Where nvl(en.MemoType,0) = 0       
order by en.ENDORESMENTNO desc;


Endoresment Detail : 

SELECT EDTL.* , GEN.CONSTANTNAME policytypename FROM IM_ENDORESMENTPOSTINGSUBDTL EDTL 
LEFT JOIN GENCONSTANT GEN ON GEN.CATEGORY='JVMEMBERTYPE' and GEN.CONSTANTVALUE=EDTL.PolicyTYPECODE and 
GEN.LANGUAGECODE='en-US';

Endoresment Claim detail :

select iecd.*,DTL.ACR_Form_No FormNO,DTL.INVOICENUMBER,(MEM.FIRST_NAME||' '||MEM.LAST_NAME) MemberName,
DTL.REQUEST_AMOUNT RequestAmount,DTL.APPROVED_AMOUNT ApprovedAmount , DTL.DENAILVALUE,  DTL.APPROVED_DATE Approved_Date,
DTL.ENCOUNTER_START_DATE,PRO.PROVIDERNAME,POL.PolicyID,gen3.ConstantName ClaimStatusName,  
dtl.DeductableValue,dtl.Co_Ins_Value from IM_ENDPOSTCLAIMDTL iecd 
left join IM_CLAIM_Process_HEADER dtl on DTL.CLAIM_CODE=IECD.CLAIMCODE 
left join Im_members mem on MEM.MEMBER_CODE=DTL.MEMBER_CODE 
left join IM_PROVIDERS pro on PRO.PROVIDERCODE=dtl.PROVIDER_CODE 
left join IM_POLICY pol on POL.POLICYCODE=dtl.POLICYCODE 
left join genconstant gen3 on GEN3.CONSTANTVALUE=dtl.CLAIM_STATUS and GEN3.CATEGORY='CLAIMREQSTATUS' and 
GEN3.LANGUAGECODE='en-US'  


After Save Call the below Package :

im_claim_endorsement.IM_CLAIM_ENDORSEMENT_FN(ENDORSEMENT_PK NUMBER,ASOURCE number,APROVIDERCODE NUMBER,ABROKERCODE NUMBER,AGROUPCODE NUMBER,APOLICYCODE NUMBER,AINDIVIDUALPOLICYCODE NUMBER,AMEMBERCODE NUMBER)