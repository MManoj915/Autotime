DECLARE L_RULES VARCHAR2(500);
BEGIN
FOR HDR IN(SELECT * FROM  IM_CLAIM_PROCESS_HEADER WHERE CLAIM_STATUS = -12) LOOP
  FOR CDTL IN (SELECT * FROM IM_CLAIM_PROCESS_DETAIL WHERE CLAIM_CODE = HDR.CLAIM_CODE) LOOP
      DELETE FROM IM_CLAIM_PROCESS_DETAIL_dTL WHERE ACTIVITY_DETAIL_CODE = CDTL.ACTIVITY_DETAIL_CODE;
      COMMIT;
      L_RULES:=INSERTACTIVITYDENIALDTL(CDTL.ACTIVITY_DETAIL_CODE,100000000000664258,CDTL.REQUESTAMOUNT,2); 
      UPDATE IM_CLAIM_PROCESS_DETAIL SET DENIAL_REASON=100000000000664258,TOTAL = 0
      WHERE ACTIVITY_DETAIL_CODE = CDTL.ACTIVITY_DETAIL_CODE;
      COMMIT;  
  END LOOP;  
  UPDATE IM_CLAIM_PROCESS_HEADER SET APPROVED_AMOUNT = 0,CLAIM_STATUS = 2,AUTHORIZEDSTATUS = 1,FINANCE = 1,
  DENIAL_REASON = 100000000000664258,DENAILVALUE = REQUEST_AMOUNT WHERE CLAIM_CODE = HDR.CLAIM_CODE;
  COMMIT;                                                                                           
END LOOP;
END;

