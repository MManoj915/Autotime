DECLARE L_PROVIDERCODE NUMBER;
BEGIN
FOR HDR IN (SELECT DISTINCT HNMCODE,BANKCODE,Decode(PAYMODE,'OB',1,'TR',2,'TT',3)PAYMODE FROM IM_PROVIDERBANK_LIST) LOOP

SELECT Max(PROVIDERCODE) INTO L_PROVIDERCODE FROM IM_PROVIDERS WHERE PROVIDERID = HDR.HNMCODE;

IF L_PROVIDERCODE = 0 OR L_PROVIDERCODE IS NULL THEN
INSERT INTO HNMNOTFOUND SELECT  HDR.HNMCODE FROM DUAL;
CONTINUE;
END IF;                                   
UPDATE  IM_PROVIDER_BILLING_DETAIL SET PAYMODE = HDR.PAYMODE WHERE PROVIDERCODE=L_PROVIDERCODE
AND  BANKCODE IN (SELECT CONSTANTVALUE FROM GENCONSTANT WHERE CATEGORY='SP_BANKS' AND Upper(SHORTNAME)=Upper(HDR.BANKCODE));
COMMIT;

END LOOP;
END;






 -- OB,1 TR,2 TT,3


 